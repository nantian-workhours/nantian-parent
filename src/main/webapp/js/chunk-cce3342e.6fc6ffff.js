(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cce3342e"],{ade2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-remind"}),t._v(" 工时管理")]),s("el-breadcrumb-item",[t._v(" 工时导入")])],1)],1),s("div",{staticClass:"container"},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:12}},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[s("el-form-item",{attrs:{label:"客户类别"}},[s("el-select",{attrs:{clearable:""},model:{value:t.form.custType,callback:function(e){t.$set(t.form,"custType",e)},expression:"form.custType"}},t._l(t.dictObj["cust"],function(t,e){return s("el-option",{key:e,attrs:{label:t.dicValue,value:t.dicCode}})}),1)],1)],1),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/work/workhours/importExcel.do","http-request":t.uploadReq,"file-list":t.fileList,"on-success":t.uploadSuccess,"on-error":t.uploadError,drag:!1,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持上传.excel文件格式")])],1)],1),s("el-col",{attrs:{span:12}},[s("h5",{staticClass:"mgb10"},[t._v("上传结果")]),s("el-table",{attrs:{border:"",data:t.resList}},[s("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),s("el-table-column",{attrs:{prop:"rows",label:"总计导入数据"}}),s("el-table-column",{attrs:{prop:"successNum",label:"成功条数"}}),s("el-table-column",{attrs:{prop:"failedNum",label:"失败条数"}})],1)],1)],1)],1)])},r=[],l=(s("e6f7"),s("b6db")),o=s.n(l),i=(s("fcf9"),{data:function(){return{form:{custType:""},fileList:[],resList:[]}},created:function(){this.dictObj=this.$store.state.dict.dictObj},methods:{submitUpload:function(){this.$refs.upload.submit()},uploadReq:function(t){var e=new FormData;e.append("myFile",t.file),e.append("custType",this.form.custType),e.append("jurisdiction",1);var s={headers:{"Content-Type":"multipart/form-data"}};o.a.post(t.action,e,s).then(function(e){t.onSuccess(e.data)}).catch(function(e){var s=e.err;t.onError(s)})},uploadSuccess:function(t,e,s){if(200===t.code){var a=t.data.code,r=a.error;r.length?(this.$message.error("文件上传失败: "+r),this.reset()):(a["fileName"]=e.name,this.reset(),this.resList.push(t.data.code))}else this.$message.error("文件上传失败: "+t.message)},uploadError:function(t){this.fileList=[]},reset:function(){this.$refs["upload"].clearFiles(),this.resList=[]}}}),c=i,n=s("620d"),u=Object(n["a"])(c,a,r,!1,null,"e03e4778",null);e["default"]=u.exports},fcf9:function(t,e){}}]);