(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f23d8a0"],{"3dca":function(e,t,a){var r=a("42b6"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},"4f7a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-remind"}),e._v(" 部门管理")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"mgb10"},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增部门")])],1),a("el-table",{staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"deptName",label:"部门名称"}}),a("el-table-column",{attrs:{prop:"deptAbbreviation",label:"部门简称"}}),a("el-table-column",{attrs:{prop:"managerId",label:"部门负责人"}}),a("el-table-column",{attrs:{prop:"prioDeptId",label:"部门助理"}}),a("el-table-column",{attrs:{prop:"serviceType",label:"服务类别"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.deptEdit(t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deptDel(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"新增部门",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"deptForm",staticClass:"dialog-form-width",attrs:{model:e.deptForm}},[a("el-form-item",{attrs:{label:"中心名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{value:"软件资源二中心",disabled:""}})],1),a("el-form-item",{attrs:{label:"部门名称","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.deptForm.deptName,callback:function(t){e.$set(e.deptForm,"deptName",t)},expression:"deptForm.deptName"}})],1),a("el-form-item",{attrs:{label:"部门简称","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.deptForm.deptAbbreviation,callback:function(t){e.$set(e.deptForm,"deptAbbreviation",t)},expression:"deptForm.deptAbbreviation"}})],1),a("el-form-item",{attrs:{label:"部门负责人","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"输入自动查询"},model:{value:e.deptForm.managerId,callback:function(t){e.$set(e.deptForm,"managerId",t)},expression:"deptForm.managerId"}})],1),a("el-form-item",{attrs:{label:"部门助理","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"输入自动查询"},model:{value:e.deptForm.assistantId,callback:function(t){e.$set(e.deptForm,"assistantId",t)},expression:"deptForm.assistantId"}})],1),a("el-form-item",{attrs:{label:"服务类别","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:e.deptForm.serviceType,callback:function(t){e.$set(e.deptForm,"serviceType",t)},expression:"deptForm.serviceType"}},e._l(e.serviceTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deptAdd}},[e._v("确 定")])],1)],1)],1)])},i=[],s=a("f923"),l=a.n(s),o=a("d4aa"),d={data:function(){return{date:"",tableData:[],deptForm:{deptName:"",deptAbbreviation:"",managerId:"",assistantId:"",serviceType:[]},serviceType:[],serviceTypeList:[],dialogFormVisible:!1,formLabelWidth:"120px"}},created:function(){this.deptFindAll(),this.dicListQuery()},methods:{deptFindAll:function(){var e=this;this.$axios.get(o["a"].department.findAll).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error("部门列表数据查询失败")})},dicListQuery:function(){var e=this;this.$axios.get(o["a"].params.subTypeQuery+"?dicType=st").then(function(t){e.serviceTypeList=t.data.res}).catch(function(t){e.$message.error("服务类别数据获取失败")})},userQueryById:function(e){var t=this;this.$axios.get(o["a"].department.findUserById+"?perId="+e).then(function(e){}).catch(function(e){t.$message.error("用户信息查询失败")})},deptAdd:function(){var e=this,t=JSON.parse(l()(this.deptForm));t.serviceType=t.serviceType.join(""),t.managerId=1*t.managerId,t.assistantId=1*t.assistantId;var a=new URLSearchParams;for(var r in t)a.append(r,t[r]);this.$axios.post(o["a"].department.add,a).then(function(t){200===t.code?(e.$message.success("部门添加成功"),e.dialogFormVisible=!1,e.deptFindAll()):e.$message.error("部门添加失败: "+data.message)}).catch(function(t){e.$message.error("部门添加失败")})},deptDel:function(e){var t=this,a=e.deptId;this.$confirm("您将要进删除："+e.deptName+"部门，是否继续？").then(function(){t.$axios.post(o["a"].department.delete+"?deptId="+a).then(function(e){200===e.code?(t.deptFindAll(),t.$message.success("部门删除成功")):t.$message.error("部门删除失败: "+data.message)}).catch(function(e){t.$message.error("部门删除失败")})}).catch(function(e){})},deptEdit:function(e){e.deptId;for(var t in this.deptForm["serviceType"]=[],this.deptForm)"serviceType"!==t?this.deptForm[t]=e[t]:this.deptForm[t].push(e[t]);this.dialogFormVisible=!0}}},n=d,p=a("620d"),c=Object(p["a"])(n,r,i,!1,null,"040c4563",null);t["default"]=c.exports},d4aa:function(e,t,a){"use strict";a("a1bf"),a("e5df"),a("aa7b"),a("b328");var r="/work",i={params:{typeQuery:r+"/params/typeQuery.do",typeAdd:r+"/params/typeAdd.do",typeDelete:r+"/params/typeDelete.do",subTypeQuery:r+"/params/subTypeQuery.do",subTypeAdd:r+"/params/subTypeAdd.do",subTypeDelete:r+"/params/subTypeDelete.do",subTypeDeleteByDicType:r+"/params/subTypeDeleteByDicType.do"},department:{findAll:r+"/department/findall.do",findUserById:r+"/department/findone.do",add:r+"/department/add.do",delete:r+"/department/delete.do",update:r+"/department/update.do"},manhour:{query:"/manhour/query",objection:"/manhour/objection"},holiday:{query:"/holiday/query"},project:{query:"/customer/query"},settlement:{query:"/settlement/query"},employee:{query:"/employee/query"}};t["a"]=i},f923:function(e,t,a){e.exports=a("3dca")}}]);