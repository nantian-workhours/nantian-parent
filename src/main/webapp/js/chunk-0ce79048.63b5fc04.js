(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce79048"],{"10db":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"table"},[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-lx-remind"}),e._v(" 员工管理")]),o("el-breadcrumb-item",[e._v(" 别名管理")])],1)],1),o("div",{staticClass:"container"},[o("el-form",{attrs:{inline:!0},model:{value:e.queryForm,callback:function(t){e.queryForm=t},expression:"queryForm"}},[o("el-form-item",{attrs:{label:"员工姓名"}},[o("el-input",{attrs:{type:"input",clearable:"",placeholder:"请输入"},model:{value:e.queryForm.inCompanyName,callback:function(t){e.$set(e.queryForm,"inCompanyName",t)},expression:"queryForm.inCompanyName"}})],1),o("el-form-item",{attrs:{label:"身份证号"}},[o("el-input",{attrs:{type:"input",clearable:"",placeholder:"请输入"},model:{value:e.queryForm.idNo,callback:function(t){e.$set(e.queryForm,"idNo",t)},expression:"queryForm.idNo"}})],1),o("el-form-item",{attrs:{label:"客户类型"}},[o("el-select",{attrs:{clearable:""},model:{value:e.queryForm.custType,callback:function(t){e.$set(e.queryForm,"custType",t)},expression:"queryForm.custType"}},e._l(e.dictObj["cust"],function(e,t){return o("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.findAll(e.queryForm)}}},[e._v("查询")]),o("el-button",{attrs:{type:"danger"},on:{click:function(t){e.showDialog=!0}}},[e._v("新增别名")])],1)],1),o("el-table",{staticClass:"table",attrs:{data:e.tableData,border:"",height:"260"}},[o("el-table-column",{attrs:{prop:"inCompanyName",label:"员工姓名"}}),o("el-table-column",{attrs:{prop:"idNo",label:"身份证号"}}),o("el-table-column",{attrs:{prop:"projectName",label:"所在项目"}}),o("el-table-column",{attrs:{prop:"inProjectName",label:"项目中别名"}}),o("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(o){return e.editFn(t.row)}}},[e._v("编辑")]),o("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(o){return e.deleteFn(t.row)}}},[e._v("删除")])]}}])})],1)],1),o("el-dialog",{attrs:{title:"添加别名",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},close:e.onClose}},[o("el-form",{ref:"dialogForm",staticStyle:{width:"400px"},attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.formLabelWidth}},[o("el-form-item",{attrs:{label:"员工姓名",prop:"inCompanyName",required:""}},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入员工姓名"},model:{value:e.dialogForm.inCompanyName,callback:function(t){e.$set(e.dialogForm,"inCompanyName",t)},expression:"dialogForm.inCompanyName"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.findByName},slot:"append"})],1)],1),o("el-form-item",{attrs:{label:"身份证号",prop:"idNo",required:""}},[o("el-input",{attrs:{disabled:"",placeholder:"查询姓名自动带入"},model:{value:e.dialogForm.idNo,callback:function(t){e.$set(e.dialogForm,"idNo",t)},expression:"dialogForm.idNo"}})],1),o("el-form-item",{attrs:{label:"项目名称",prop:"projectNumber",required:""}},[o("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.projectNumber,callback:function(t){e.$set(e.dialogForm,"projectNumber",t)},expression:"dialogForm.projectNumber"}},e._l(e.projectList,function(e,t){return o("el-option",{key:t,attrs:{label:e.projectName,value:e.projectNumber}})}),1)],1),o("el-form-item",{attrs:{label:"别名",prop:"inProjectName",required:""}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:e.dialogForm.inProjectName,callback:function(t){e.$set(e.dialogForm,"inProjectName",t)},expression:"dialogForm.inProjectName"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取消")]),e.editFlag?o("el-button",{attrs:{type:"primary"},on:{click:e.updateFn}},[e._v("更新")]):o("el-button",{attrs:{type:"primary"},on:{click:e.addFn}},[e._v("添加")])],1),o("el-dialog",{attrs:{width:"30%",title:"查询到多条信息, 请选择",visible:e.innerVisible,"append-to-body":"",height:"200"},on:{"update:visible":function(t){e.innerVisible=t}}},[o("el-table",{staticClass:"table",attrs:{data:e.employeeList,border:"",height:"260"}},[o("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),o("el-table-column",{attrs:{prop:"idNo",label:"身份证号"}}),o("el-table-column",{attrs:{prop:"mobileNo",label:"手机号"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.useData(t.row)}}},[e._v("使用")])]}}])})],1)],1)],1)],1)},a=[],r=o("f923"),l=o.n(r),n={data:function(){return{queryForm:{},dialogForm:{},formLabelWidth:"120px",showDialog:!1,tableData:[],projectList:[],editFlag:!1,innerVisible:!1,employeeList:[],rules:{inCompanyName:[{required:!0,message:"请输入必填项",trigger:"blur"}],idNo:[{required:!0,message:"请输入必填项",trigger:"blur"}],projectNumber:[{required:!0,message:"请输入必填项",trigger:"blur"}],inProjectName:[{required:!0,message:"请输入必填项",trigger:"blur"}]}}},created:function(){this.findAll(),this.dicListQuery()},methods:{useData:function(e){this.innerVisible=!1,this.$set(this.dialogForm,"idNo",e.idNo),this.$set(this.dialogForm,"perId",e.perId)},onClose:function(){this.editFlag=!1,this.$refs["dialogForm"].resetFields(),this.dialogForm={inCompanyName:"",idNo:"",projectNumber:"",inProjectName:""}},findByName:function(){var e=this,t=this.dialogForm.inCompanyName;t&&this.$axios.postForm(this.$api.employee.findbyidandname,{name:t}).then(function(t){if(200===t.code){var o=t.data.data;if(!o.length)return e.$message.error("查不到员工信息"),void(e.dialogForm.idNo&&e.$set(e.dialogForm,"idNo",""));if(o.length>1)return e.innerVisible=!0,void(e.employeeList=o);e.$set(e.dialogForm,"idNo",o[0].idNo),e.$set(e.dialogForm,"perId",o[0].perId)}})},addFn:function(){var e=this;this.$refs["dialogForm"].validate(function(t){t&&e.$axios.postForm(e.$api.alias.add,e.dialogForm).then(function(t){200===t.code?(e.$message.success("添加成功"),e.showDialog=!1,e.findAll()):(console.log(t),e.$message.error("添加失败: "+t.data.error))})})},updateFn:function(){var e=this;this.$refs["dialogForm"].validate(function(t){if(t){var o={perId:e.dialogForm.perId,projectNumber:e.dialogForm.projectNumber,idNo:e.dialogForm.idNo,inProjectName:e.dialogForm.inProjectName};e.$axios.postForm(e.$api.alias.update,o).then(function(t){200===t.code?(e.$message.success("更新成功"),e.showDialog=!1,e.findAll()):e.$message.error("更新失败: "+t.data.error)}).catch(function(t){e.$message.error("更新失败")})}})},editFn:function(e){this.showDialog=!0,this.editFlag=!0,this.dialogForm=JSON.parse(l()(e))},deleteFn:function(e){var t=this,o=e.idNo;this.$confirm("确定要删除吗？").then(function(){t.$axios.postForm(t.$api.alias.delete,{idNo:o}).then(function(e){200===e.code?(t.findAll(),t.$message.success("删除成功")):t.$message.error("删除失败: "+data.message)}).catch(function(e){t.$message.error("删除失败")})}).catch(function(e){})},findAll:function(e){var t=this,o=e||{};this.$axios.postForm(this.$api.alias.findAll,o).then(function(e){200===e.code?t.tableData=e.data.data:t.$message.error("查询别名信息失败")})},dicListQuery:function(){var e=this;this.dictObj=this.$store.state.dict.dictObj,this.$axios.postForm(this.$api.alias.projectQuery).then(function(t){200===t.code?e.projectList=t.data.data:e.$message.error("查询项目信息失败")})}}},s=n,c=o("620d"),d=Object(c["a"])(s,i,a,!1,null,"283d976c",null);t["default"]=d.exports},"3dca":function(e,t,o){var i=o("42b6"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},f923:function(e,t,o){e.exports=o("3dca")}}]);