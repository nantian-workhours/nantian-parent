(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee8a82be"],{"21f4":function(e,t,r){"use strict";r.d(t,"a",function(){return s});r("a1bf"),r("e5df"),r("aa7b"),r("b328");var a=r("caf6"),i=r.n(a),o=r("d4aa");function s(e){return i.a.get(o["a"].params.subTypeQuery+"?dicType="+e)}},"70d1":function(e,t,r){"use strict";var a=r("ae86"),i=r.n(a);i.a},ae86:function(e,t,r){},d400:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-friend"}),e._v(" 员工管理")]),r("el-breadcrumb-item",[e._v(" 查看详情")])],1)],1),r("div",{staticClass:"container"},[r("h5",{staticClass:"mgb10"},[e._v("基本信息")]),r("el-form",{ref:"form",attrs:{inline:!0,rules:e.rules,model:e.form,disabled:e.disableStatus,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"身份证号",prop:"idNo",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.idNo,callback:function(t){e.$set(e.form,"idNo",t)},expression:"form.idNo"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"生日",prop:"birthdayStr",required:""}},[r("el-date-picker",{staticClass:"width-control",attrs:{type:"date",placeholder:"请录入"},model:{value:e.form.birthdayStr,callback:function(t){e.$set(e.form,"birthdayStr",t)},expression:"form.birthdayStr"}})],1),r("el-form-item",{attrs:{label:"民族",prop:"ethnic",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.ethnic,callback:function(t){e.$set(e.form,"ethnic",t)},expression:"form.ethnic"}})],1),r("el-form-item",{attrs:{label:"籍贯",prop:"nativePlace",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.nativePlace,callback:function(t){e.$set(e.form,"nativePlace",t)},expression:"form.nativePlace"}})],1),r("el-form-item",{attrs:{label:"婚姻状况",prop:"marriageStatus",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.marriageStatus,callback:function(t){e.$set(e.form,"marriageStatus",t)},expression:"form.marriageStatus"}},e._l(e.marrigeList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"公司邮箱",prop:"companyEmail",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.companyEmail,callback:function(t){e.$set(e.form,"companyEmail",t)},expression:"form.companyEmail"}})],1),r("el-form-item",{attrs:{label:"个人邮箱",prop:"personEmail",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.personEmail,callback:function(t){e.$set(e.form,"personEmail",t)},expression:"form.personEmail"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"mobileNo",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.mobileNo,callback:function(t){e.$set(e.form,"mobileNo",t)},expression:"form.mobileNo"}})],1),r("el-form-item",{attrs:{label:"学历",prop:"education",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.education,callback:function(t){e.$set(e.form,"education",t)},expression:"form.education"}},e._l(e.educationList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"毕业院校",prop:"university",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.university,callback:function(t){e.$set(e.form,"university",t)},expression:"form.university"}})],1),r("el-form-item",{attrs:{label:"专业",prop:"major",required:""}},[r("el-input",{attrs:{placeholder:"请录入"},model:{value:e.form.major,callback:function(t){e.$set(e.form,"major",t)},expression:"form.major"}})],1),r("el-form-item",{attrs:{label:"毕业日期",prop:"graduationDateStr",required:""}},[r("el-date-picker",{staticClass:"width-control",attrs:{type:"date",placeholder:"请录入"},model:{value:e.form.graduationDateStr,callback:function(t){e.$set(e.form,"graduationDateStr",t)},expression:"form.graduationDateStr"}})],1),r("el-form-item",{attrs:{label:"职位",prop:"position",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},e._l(e.positionList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"岗位",prop:"post",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.post,callback:function(t){e.$set(e.form,"post",t)},expression:"form.post"}},e._l(e.postList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"在职状态",prop:"status",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1),r("el-form-item",{attrs:{label:"入司日期",prop:"entryDateStr",required:""}},[r("el-date-picker",{staticClass:"width-control",attrs:{type:"date",placeholder:"请录入"},model:{value:e.form.entryDateStr,callback:function(t){e.$set(e.form,"entryDateStr",t)},expression:"form.entryDateStr"}})],1),r("el-form-item",{attrs:{label:"离司日期"}},[r("el-date-picker",{staticClass:"width-control",attrs:{type:"date",placeholder:"请录入"},model:{value:e.form.leaveDateStr,callback:function(t){e.$set(e.form,"leaveDateStr",t)},expression:"form.leaveDateStr"}})],1),r("el-form-item",{attrs:{label:"所属部门",prop:"deptId",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}},e._l(e.deptList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"系统权限",prop:"jurisdiction",required:""}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.form.jurisdiction,callback:function(t){e.$set(e.form,"jurisdiction",t)},expression:"form.jurisdiction"}},e._l(e.sysPowerList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dicValue,value:e.dicCode}})}),1)],1)],1),null==e.perId?r("el-button",{attrs:{type:"primary",disabled:e.disableStatus},on:{click:function(t){return e.newOrUptate("new")}}},[e._v("添加")]):r("el-button",{attrs:{type:"primary",disabled:e.disableStatus},on:{click:function(t){return e.newOrUptate("update")}}},[e._v("更新")]),r("el-button",{attrs:{type:"success",disabled:!e.disableStatus},on:{click:e.editHandle}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger"},on:{click:e.cancel}},[e._v("取消")])],1)])},i=[],o=(r("38f0"),r("21f4")),s={data:function(){return{form:{name:"ttt",idNo:"53010219200508011x",sex:"M",birthdayStr:"",ethnic:"汉族",nativePlace:"",marriageStatus:"",companyEmail:"",personEmail:"",mobileNo:"",education:"",university:"",major:"",graduationDateStr:"",position:"",post:"",status:"1",entryDateStr:"",leaveDateStr:"",deptId:null,jurisdiction:"0"},rules:{name:[{required:!0,message:"请输入必填项",trigger:"blur"}],idNo:[{required:!0,message:"请输入必填项",trigger:"blur"}],sex:[{required:!0,message:"请输入必填项",trigger:"blur"}],birthdayStr:[{required:!0,message:"请输入必填项",trigger:"blur"}],ethnic:[{required:!0,message:"请输入必填项",trigger:"blur"}],nativePlace:[{required:!0,message:"请输入必填项",trigger:"blur"}],marriageStatus:[{required:!0,message:"请输入必填项",trigger:"blur"}],companyEmail:[{required:!0,message:"请输入必填项",trigger:"blur"}],personEmail:[{required:!0,message:"请输入必填项",trigger:"blur"}],mobileNo:[{required:!0,message:"请输入必填项",trigger:"blur"}],education:[{required:!0,message:"请输入必填项",trigger:"blur"}],university:[{required:!0,message:"请输入必填项",trigger:"blur"}],major:[{required:!0,message:"请输入必填项",trigger:"blur"}],graduationDateStr:[{required:!0,message:"请输入必填项",trigger:"blur"}],position:[{required:!0,message:"请输入必填项",trigger:"blur"}],post:[{required:!0,message:"请输入必填项",trigger:"blur"}],status:[{required:!0,message:"请输入必填项",trigger:"blur"}],entryDateStr:[{required:!0,message:"请输入必填项",trigger:"blur"}],deptId:[{required:!0,message:"请输入必填项",trigger:"blur"}],jurisdiction:[{required:!0,message:"请输入必填项",trigger:"blur"}]},deptList:[],sexList:[],marrigeList:[],educationList:[],positionList:[],statusList:[],postList:[],sysPowerList:[],projectInfo:{},perId:null,status:null}},methods:{editHandle:function(){this.status="edit"},transReqData:function(e){var t="";for(var r in e)t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&";return t},dataFmt:function(e){var t={},r=["birthdayStr","graduationDateStr","entryDateStr","leaveDateStr"],a=["password","birthday","graduationDate","entryDate","leaveDate"];for(var i in e)-1===a.indexOf(i)&&(-1!==r.indexOf(i)&&null!=e[i]?t[i]=this.formatDate(e[i],"yyyy-MM-dd"):null!=e[i]&&(t[i]=e[i]));return null==t["leaveDateStr"]&&delete t.leaveDateStr,t},newOrUptate:function(e){var t=this;this.$refs["form"].validate(function(r){if(r){var a="new"===e?t.$api.employee.adduser:t.$api.employee.update,i=t.dataFmt(t.form);t.$axios.postForm(a,i).then(function(e){200===e.code?(t.$message.success("员工信息添加成功"),t.$router.back(-1)):"undefined"!==typeof e.data?t.$message.error("员工信息添加失败"+e.data.errorMessage):t.$message.error("员工信息更新失败")}).catch(function(e){t.$message.error(e.errorMessage)})}})},deptListQuery:function(){var e=this;this.$axios.get(this.$api.department.findAll).then(function(t){if(200==t.code){var r=[],a=t.data.data;a.forEach(function(e){r.push({label:e.deptName,value:e.deptId})}),e.deptList=r}else e.$message.error("部门列表数据查询失败: "+t.message)}).catch(function(e){})},initDictList:function(){var e=this;Object(o["a"])("sex").then(function(t){var r=t.data;200===r.code?e.sexList=r.data.res:e.sexList=[]}),Object(o["a"])("MARRIAGE_STATUS").then(function(t){var r=t.data;200===r.code?e.marrigeList=r.data.res:e.marrigeList=[]}),Object(o["a"])("EDUCATION").then(function(t){var r=t.data;200===r.code?e.educationList=r.data.res:e.educationList=[]}),Object(o["a"])("POSITION").then(function(t){var r=t.data;200===r.code?e.positionList=r.data.res:e.positionList=[]}),Object(o["a"])("STATUS").then(function(t){var r=t.data;200===r.code?e.statusList=r.data.res:e.statusList=[]}),Object(o["a"])("POST").then(function(t){var r=t.data;200===r.code?e.postList=r.data.res:e.postList=[]}),Object(o["a"])("SYS_POWER").then(function(t){var r=t.data;200===r.code?e.sysPowerList=r.data.res:e.sysPowerList=[]})},cancel:function(){this.$router.back(-1)},employeeInfoQuery:function(e){var t=this;this.$axios.get(this.$api.employee.selectpersonnel+"?perId="+e).then(function(e){if(200===e.code){var r=e.data.data;t.form=r,t.form["birthdayStr"]=r.birthday,t.form["graduationDateStr"]=r.graduationDate,t.form["entryDateStr"]=r.entryDate,t.form["leaveDateStr"]=r.leaveDate}})}},computed:{disableStatus:function(){return"showdetail"===this.status}},mounted:function(){this.perId=this.$route.params.perId,this.status=this.$route.params.status,this.deptListQuery(),this.initDictList(),null!=this.perId&&this.employeeInfoQuery(this.perId)}},l=s,n=(r("70d1"),r("620d")),u=Object(n["a"])(l,a,i,!1,null,"6d92afda",null);t["default"]=u.exports}}]);