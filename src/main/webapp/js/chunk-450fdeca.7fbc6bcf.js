(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-450fdeca"],{"1e45":function(t,e,a){"use strict";var r=a("aacd"),o=a.n(r);o.a},aacd:function(t,e,a){},e37c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-remind"}),t._v(" 工时管理")]),a("el-breadcrumb-item",[t._v(" 异议处理")])],1)],1),a("div",{staticClass:"container"},[a("el-form",{attrs:{inline:!0,model:t.queryForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:t.queryForm.userName,callback:function(e){t.$set(t.queryForm,"userName",e)},expression:"queryForm.userName"}})],1),a("el-form-item",{attrs:{label:"申请日期"}},[a("el-date-picker",{attrs:{type:"date",clearable:"",placeholder:"请选择日期"},model:{value:t.queryForm.applyDateStr,callback:function(e){t.$set(t.queryForm,"applyDateStr",e)},expression:"queryForm.applyDateStr"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.queryFn}},[t._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.showObjectionDialog=!0}}},[t._v("异议申请")])],1)],1),a("el-table",{staticClass:"table",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"userName",label:"申请人"}}),a("el-table-column",{attrs:{prop:"userName",label:"申请工时",formatter:t.applyTypeFmt,width:"300"}}),a("el-table-column",{attrs:{prop:"workDate",label:"异议日期",formatter:t.dateFmt}}),a("el-table-column",{attrs:{prop:"applyDate",label:"申请日期",formatter:t.dateFmt}}),a("el-table-column",{attrs:{prop:"errDescribe",label:"申请理由"}}),a("el-table-column",{attrs:{prop:"applyStatus",label:"处理状态",formatter:t.statusFmt}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["R"===e.row.applyStatus?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.beginAudit(e.row)}}},[t._v("审核")]):a("span",[t._v("-")])]}}])})],1),a("el-dialog",{attrs:{title:"异议申请",visible:t.showObjectionDialog},on:{"update:visible":function(e){t.showObjectionDialog=e}}},[a("el-form",{attrs:{model:t.objectionForm}},[a("el-form-item",{attrs:{label:"申请人","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"220px"},attrs:{readonly:""},model:{value:t.objectionForm.userName,callback:function(e){t.$set(t.objectionForm,"userName",e)},expression:"objectionForm.userName"}}),t._v(" 后续自动带入当前登录的用户名\r\n                ")],1),a("el-form-item",{attrs:{label:"异议日期","label-width":t.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.objectionForm.workDateStr,callback:function(e){t.$set(t.objectionForm,"workDateStr",e)},expression:"objectionForm.workDateStr"}}),t._v(" \r\n                    "),a("el-button",{attrs:{type:"primary"},on:{click:t.queryHours}},[t._v("查询")])],1),a("el-form-item",{attrs:{label:"当天工时","label-width":t.formLabelWidth}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:5,align:"left"}},[a("el-tag",{attrs:{type:"primary"}},[t._v("正常工时："+t._s(t.objectionForm.normalHours)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"success"}},[t._v("加班工时："+t._s(t.objectionForm.workHours)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("请假工时："+t._s(t.objectionForm.leaveHours)+"H")])],1)],1)],1),a("el-form-item",{attrs:{label:"申请工时","label-width":t.formLabelWidth}},[a("p",[t._v("正常工时 "),a("el-input-number",{attrs:{min:1,max:10,size:"mini","controls-position":"right"},model:{value:t.objectionForm.normalHoursStr,callback:function(e){t.$set(t.objectionForm,"normalHoursStr",e)},expression:"objectionForm.normalHoursStr"}}),t._v(" H")],1),a("p",[t._v("加班工时 "),a("el-input-number",{attrs:{min:1,max:10,size:"mini","controls-position":"right"},model:{value:t.objectionForm.workHoursStr,callback:function(e){t.$set(t.objectionForm,"workHoursStr",e)},expression:"objectionForm.workHoursStr"}}),t._v(" H")],1),a("p",[t._v("请假工时 "),a("el-input-number",{attrs:{min:1,max:10,size:"mini","controls-position":"right"},model:{value:t.objectionForm.leaveHoursStr,callback:function(e){t.$set(t.objectionForm,"leaveHoursStr",e)},expression:"objectionForm.leaveHoursStr"}}),t._v(" H")],1)]),a("el-form-item",{attrs:{label:"申请理由","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.objectionForm.errDescribe,callback:function(e){t.$set(t.objectionForm,"errDescribe",e)},expression:"objectionForm.errDescribe"}})],1),a("el-form-item",{attrs:{label:"附件","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showObjectionDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showObjectionDialog=!1}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"异议审核",visible:t.showAuditDialog},on:{"update:visible":function(e){t.showAuditDialog=e}}},[a("el-form",{ref:"auditForm",attrs:{model:t.auditForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"异议日期","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"input",value:"2019-01-23",readonly:""}})],1),a("el-form-item",{attrs:{label:"当天工时","label-width":t.formLabelWidth}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:5,align:"left"}},[a("el-tag",{attrs:{type:"primary"}},[t._v("正常工时："+t._s(t.auditForm.normalHours)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"success"}},[t._v("加班工时："+t._s(t.auditForm.workHours)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("请假工时："+t._s(t.auditForm.leaveHours)+"H")])],1)],1)],1),a("el-form-item",{attrs:{label:"申请工时","label-width":t.formLabelWidth}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:5,align:"left"}},[a("el-tag",{attrs:{type:"primary"}},[t._v("正常工时："+t._s(t.auditForm.leaveHoursStr)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"success"}},[t._v("加班工时："+t._s(t.auditForm.leaveHoursStr)+"H")])],1),a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{type:"danger"}},[t._v("请假工时："+t._s(t.auditForm.leaveHoursStr)+"H")])],1)],1)],1),a("el-form-item",{attrs:{label:"申请理由","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",readonly:""},model:{value:t.auditForm.errDescribe,callback:function(e){t.$set(t.auditForm,"errDescribe",e)},expression:"auditForm.errDescribe"}})],1),a("el-form-item",{attrs:{label:"附件","label-width":t.formLabelWidth}},[a("img",{attrs:{src:t.auditForm.filePath,alt:""}})]),a("el-form-item",{attrs:{label:"审核处理","label-width":t.formLabelWidth,prop:"applyStatus",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.auditForm.applyStatus,callback:function(e){t.$set(t.auditForm,"applyStatus",e)},expression:"auditForm.applyStatus"}},[a("el-option",{attrs:{label:"通过",value:"Y"}}),a("el-option",{attrs:{label:"退回",value:"N"}})],1)],1),a("el-form-item",{attrs:{label:"退回原因","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.auditForm.approveOpn,callback:function(e){t.$set(t.auditForm,"approveOpn",e)},expression:"auditForm.approveOpn"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showAuditDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.auditSubmit}},[t._v("提交")])],1)],1)],1)])},o=[],l=(a("a342"),a("d4aa"),{data:function(){return{tableData:[],queryForm:{},objectionForm:{userName:"陆佰"},auditForm:{},showObjectionDialog:!1,showAuditDialog:!1,formLabelWidth:"120px",rules:{applyStatus:[{required:!0,message:"请输入必填项",trigger:"blur"}]}}},mounted:function(){this.findAll()},methods:{auditSubmit:function(){var t=this;this.$refs["auditForm"].validate(function(e){if(e){var a={applySeq:t.auditForm.applySeq,applyStatus:t.auditForm.applyStatus,approveOpn:t.auditForm.approveOpn};t.$axios.postForm(t.$api.objection.applySubmit,a).then(function(e){200===e.code?(t.$message.success("审核成功"),t.showAuditDialog=!1,t.findAll()):t.$message.error("审核失败: "+e.data.error)})}})},beginAudit:function(t){this.auditForm=t,delete this.auditForm.applyStatus,this.showAuditDialog=!0},queryHours:function(){var t=this,e={userName:this.objectionForm.userName,applyDateStr:this.objectionForm.applyDateStr};this.$axios.postForm(this.$api.objection.findAll,e).then(function(e){if(200===e.code){var a=e.data.data;t.objectionForm={normalHoursStr:a.normalHoursStr,workHoursStr:a.workHoursStr,leaveHoursStr:a.leaveHoursStr,normalHours:a.normalHours,workHours:a.workHours,leaveHours:a.leaveHours}}else t.$message.error("查询工时信息失败")})},statusFmt:function(t,e,a){var r={N:"退回",R:"审核中",Y:"通过"};return r[a]},dateFmt:function(t,e,a){return null!=a?a.split(" ")[0]:"-"},applyTypeFmt:function(t){var e=t.normalHours,a=t.workHours,r=t.leaveHours;return"正常工时：".concat(e,"；加班工时：").concat(a,"；请假工时：").concat(r)},queryFn:function(){this.queryForm.applyDateStr=this.formatDate(this.queryForm.applyDateStr,"yyyy-MM-dd"),this.findAll(this.queryForm)},findAll:function(t){var e=this,a=t||{};this.$axios.postForm(this.$api.objection.findAll,a).then(function(t){200===t.code?e.tableData=t.data.data:e.$message.error("查询工时信息失败")})}}}),i=l,s=(a("1e45"),a("620d")),n=Object(s["a"])(i,r,o,!1,null,"6c4c9d3a",null);e["default"]=n.exports}}]);